{% extends "layout.html" %}
{% block content %}
    <h1 class="h2">Services</h1>
    <div>
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        {% for message in messages %}
        <div class="alert alert-success alert-dismissable" role="alert"> 
            <button type="button" class="close" data-dismiss="alert" aria-label="close">         
                <span aria-hidden="true">x</span>        
            </button>        
        {{message}}               
    </div>
        {% endfor %}    
        {% endif %}
        {% endwith %}

    {% if past_flights.rowcount != 0 %}
    <hr/>
    <div class="table-responsive">
        <h1 id="timekeeper" hidden>Past</h1>
        <table class="table table-striped table-sm" id="myPastTable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Long Name</th>
                    <th>Home Base</th>
                    <th>Manager</th>
                    <th>Revenue</th>
                    <th>Ingredients Carried</th>
                    <th>Cost Carried</th>
                    <th>Weight Carried</th>
                </tr>
            </thead>

            <tbody>
                {% for row in past_flights %}
                <tr>
                    <td>{{ row.id }}</td>
                    <td>{{ row.long_name }}</td>
                    <td>{{ row.home_base }}</td>
                    <td>{{ row.manager }}</td>
                    <td>{{ row.revenue }}</td>
                    <td>{{ row.ingredients_carried }}</td>
                    <td>{{ row.costs_carried }}</td>
                    <td>{{ row.weight_carried }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
       
{% endblock content %}
{% block scripts %}
<script>
    $(document).ready( function () {
    $('#myPastTable').DataTable({"pageLength": 25});
} );
</script>
<script>
    $(document).ready( function () {
    $('#myCurrentTable').DataTable({"pageLength": 25});
} );
</script>
<script>
    $(document).ready( function () {
    $('#myFutureTable').DataTable({"pageLength": 25});
} );
</script>
<script>
    $(document).ready( function () {
    $('#myTable').DataTable({"pageLength": 25});
} );
</script>
<script type='text/javascript'>
    $(function () {
        $(".btn-warning").click(function () {
            var airline_name = $(this).parents("tr").find("#airline").text();
            var flight_num = $(this).parents("tr").find("#flightid").text();
            var timekeeper = $(this).parents("div").find("#timekeeper").text();
            var tableType = 0;
            $.ajax({
                url: "/flight_details",
                type: 'POST',
                data: {airline_name: airline_name, flight_num: flight_num, timekeeper: timekeeper, tableType: tableType},
                success: function(data) {
                    $("#info").html(data);
                    $("#info").append(data.htmlresponse);
                }
            });
        });
    });
</script>
{% endblock scripts %}
